digraph {
  rankdir=TD;

  node [fontname="lmtt", fontsize=11, fixedsize=true, width=1.3, shape=box, style="rounded,filled,bold"];

  edge [fontname="lmtt", fontsize=11];

  edge [weight = 100];
  "DEFINED" -> "STARTED" [label=" MTP >= starttime"];
  "STARTED" -> "FAILED" [label=" count < threshold\nMTP >= timeout"];
  "LOCKED_IN" -> "ACTIVE" [label=" always"];

  edge [weight = 1];
  "STARTED" -> "LOCKED_IN" [label="count >= threshold"];

  "FAILED" -> "LOCKED_IN" [style=invis];

  "DEFINED"-> "DEFINED" [label=" MTP < starttime"];
  "STARTED"-> "STARTED" [label=" count < threshold AND MTP < timeout"];
  "ACTIVE" -> "ACTIVE";
  "FAILED" -> "FAILED";

  "STARTED" [fillcolor="#a0a0ff"];
  "LOCKED_IN" [fillcolor="#ffffa0"];
  "ACTIVE" [fillcolor="#a0ffa0"];
  "FAILED" [fillcolor="#ffa0a0"];

  { rank=same; "FAILED" "LOCKED_IN" }
  { rank=sink; "ACTIVE" }
}
